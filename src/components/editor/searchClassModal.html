<modal-template editing="false">
  <modal-title translate>Search classes</modal-title>

  <modal-body>

    <button ng-if="!ctrl.onlySelection" type="button" class="btn btn-default btn-md pull-right" ng-click="ctrl.createNewClass()">
      <span class="glyphicon glyphicon-plus"></span>
      {{'Create new class' | translate}}
    </button>

    <div class="row">

      <div class="col-md-4">
        <p translate>Class search info</p>
        <div class="input-group input-group-lg">
          <input autofocus type="text" class="form-control" placeholder="{{'search class' | translate}}"
                 ng-model="ctrl.searchText"
                 ng-model-options="{ debounce: { 'default': 500, 'blur': 0 } }"
                 key-control="ctrl.searchResults" />
          <i class="glyphicon glyphicon-search form-control-feedback"></i>
        </div>

        <div class="input-group input-group-lg">
          <div class="selectContainer">
            <select class="form-control" ng-model="ctrl.modelId">
              <option value="" translate>All models</option>
              <option ng-repeat="model in ctrl.models" value="{{model.id}}">{{model | translateLabel}}</option>
            </select>
          </div>
        </div>

        <div class="checkbox">
          <label><input type="checkbox" ng-model="ctrl.showExcluded">{{'Show excluded' | translate}}</label>
        </div>

        <div class="checkbox">
          <label><input type="checkbox" ng-model="ctrl.showProfiles">{{'Show classes defined in profiles' | translate}}</label>
        </div>
      </div>

      <div class="col-md-4 search-results">
        <search-results items="ctrl.searchResults" exclude="ctrl.exclude" on-select="ctrl.selectItem(item)">
          <i ng-class="searchResult.glyphIconClass"></i>
          <h5>{{searchResult | translateLabel}}</h5>
          <p>{{searchResult.definedBy | translateLabel}}</p>
        </search-results>
      </div>

      <div class="col-md-4 search-selection">
        <form class="editable-form">
          <class-form ng-if="ctrl.selectedClass" class="ctrl.selectedClass" old-class="ctrl.selectedClass" model="ctrl.model"></class-form>
        </form>
      </div>

    </div>
  </modal-body>

  <modal-buttons>
    <div class="alert alert-danger" style="display: inline; margin-right: 10px;" role="alert" ng-show="ctrl.cannotConfirm">
      <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
      <span>{{ctrl.cannotConfirm | translate}}</span>
    </div>
    <button type="button" class="btn btn-default" ng-click="ctrl.close()" translate>Cancel</button>
    <button type="button" class="btn btn-default" ng-click="ctrl.confirm()" ng-disabled="!ctrl.selectedClass || ctrl.cannotConfirm">{{ctrl.textForSelection(ctrl.selectedClass) | translate}}</button>
  </modal-buttons>
</modal-template>

