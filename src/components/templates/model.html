<div ng-if="!ctrl.loading">

  <uib-accordion>
    <uib-accordion-group is-open="ctrl.showModelInfo">
      <uib-accordion-heading>{{ctrl.model | translateLabel}} <span class="glyphicon pull-right" ng-class="{'glyphicon-chevron-down': ctrl.showModelInfo, 'glyphicon-chevron-right': !ctrl.showModelInfo}"></span></uib-accordion-heading>
      <model-view model="ctrl.model"></model-view>
    </uib-accordion-group>
  </uib-accordion>

  <div class="bottom">
    <div class="model-panel--left">
      <uib-tabset>

        <uib-tab>
          <uib-tab-heading>
            <i class="glyphicon glyphicon-list-alt"></i><p>{{'Classes' | translate}}</p>
          </uib-tab-heading>

          <button ng-show="ctrl.isLoggedIn()" type="button" class="btn btn-default btn-md add-class-button" ng-click="ctrl.addClass()" translate>Lisää luokka</button>

          <ul class="panel__list" window-height padding="150">
            <li ng-repeat="class in ctrl.classes | orderByLabel"
                ng-class="{'model-panel__selection': ctrl.isClassActivated(class)}"
                ng-click="ctrl.activateClass(class['@id'])">
              {{class | translateLabel}}
            </li>
          </ul>
        </uib-tab>
        <uib-tab>
          <uib-tab-heading>
            <i class="glyphicon glyphicon-tasks"></i><p>{{'Attributes' | translate}}</p>
          </uib-tab-heading>
          <ul class="panel__list" window-height padding="93">
            <li ng-repeat="attribute in ctrl.attributes | orderByLabel"
                ng-class="{'model-panel__selection': ctrl.isAttributeActivated(attribute)}"
                ng-click="ctrl.activateAttribute(attribute['@id'])">
              {{attribute | translateLabel}}
            </li>
          </ul>
        </uib-tab>
        <uib-tab>
          <uib-tab-heading>
            <i class="glyphicon glyphicon-sort"></i><p>{{'Associations' | translate}}</p>
          </uib-tab-heading>
          <ul class="panel__list" window-height padding="93">
            <li ng-repeat="association in ctrl.associations | orderByLabel"
                ng-class="{'model-panel__selection': ctrl.isAssociationActivated(association)}"
                ng-click="ctrl.activateAssociation(association['@id'])">
              {{association | translateLabel}}
            </li>
          </ul>
        </uib-tab>
      </uib-tabset>
    </div>

    <div class="model-panel--right" window-height padding="3">
      <class-view id="ctrl.activatedClassId" ng-if="ctrl.activatedClassId"></class-view>
      <attribute-view id="ctrl.activatedAttributeId" ng-if="ctrl.activatedAttributeId"></attribute-view>
      <association-view id="ctrl.activatedAssociationId" ng-if="ctrl.activatedAssociationId"></association-view>
    </div>
  </div>

</div>
